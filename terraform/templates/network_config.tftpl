#cloud-config
network:
  version: 2
  renderer: networkd
  ethernets:
    nat_interface:
      match:
        macaddress: "${nat_mac}"
      set-name: ens4
      dhcp4: false
      addresses:
        - "${nat_ip_cidr}"
      gateway4: "${nat_gateway}"
      nameservers:
        addresses: [8.8.8.8, 1.1.1.1]

    hostonly_interface:
      match:
        macaddress: "${hostonly_mac}"
      set-name: ens3
      dhcp4: false
      addresses:
        - "${hostonly_ip_cidr}"
      routes:
        - to: 172.16.0.0/16
          via: "${hostonly_gateway}"
          metric: 100
